name: test

on:
  workflow_dispatch:
    
jobs:
  debug:
    name: Debug
    runs-on: ubuntu-latest

    services:
      docker:
        image: docker:dind
        ports:
          - 8080:2375
        options: --privileged=true --name=docker-dind

    steps:
    - name: sleep
      run: sleep 10
    - name: test docker
      run: docker run curlimages/curl
      env:
        DOCKER_HOST: tcp://localhost:8080
    - name: Setup tmate session
      if: always()
      uses: mxschmitt/action-tmate@v3

